{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load i18n_tags %}

{% block title %}{{ destination|get_translated:'title' }} | {{ block.super }}{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('{% if destination.main_image %}{{ destination.main_image.url }}{% else %}{% static 'images/hero-banner.jpg' %}{% endif %}'); min-height: 500px;">
  <div class="container">
    <p class="hero-text" style="margin-bottom: 10px; font-size: 16px;">
      <ion-icon name="location" style="vertical-align: middle; font-size: 20px;"></ion-icon>
      {% if destination|get_translated:'city' and destination|get_translated:'region' %}
        {{ destination|get_translated:'city' }}, {{ destination|get_translated:'region' }}, {{ destination|get_translated:'country' }}
      {% elif destination|get_translated:'city' %}
        {{ destination|get_translated:'city' }}, {{ destination|get_translated:'country' }}
      {% else %}
        {{ destination|get_translated:'country' }}
      {% endif %}
    </p>
    <h1 class="h1 hero-title" style="margin-bottom: 15px;">{{ destination|get_translated:'name' }}</h1>
    <p class="hero-text" style="font-size: 20px; max-width: 800px; margin-inline: auto;">{{ destination|get_translated:'title' }}</p>
  </div>
</section>

<!-- Destination Details -->
<section class="package" style="padding: var(--section-padding) 0;">
  <div class="container">

    <!-- Short Description -->
    <div style="background: var(--cultured); padding: 40px 30px; border-radius: var(--radius-15); margin-bottom: 50px; text-align: center;">
      <h3 class="h3 section-title" style="margin-bottom: 20px; color: var(--bright-navy-blue);">
        {% trans "Overview" %}
      </h3>
      <p class="section-text" style="font-size: var(--fs-4); line-height: 1.8; max-width: 900px; margin-inline: auto;">
        {{ destination|get_translated:'short_description' }}
      </p>
    </div>

    <div style="display: grid; grid-template-columns: 1fr; gap: 40px; margin-bottom: 50px;">

      <!-- Main Content Grid -->
      <div style="display: grid; grid-template-columns: 1fr; gap: 40px;">

        <!-- Description Card -->
        <div class="package-card" style="display: block;">
          <div class="card-content">
            <h3 class="h3 card-title" style="margin-bottom: 20px;">
              <ion-icon name="document-text-outline" style="vertical-align: middle;"></ion-icon>
              {% trans "About" %} {{ destination|get_translated:'name' }}
            </h3>
            <div class="card-text" style="line-height: 1.8;">
              {{ destination|get_translated:'description'|linebreaks }}
            </div>
          </div>
        </div>

        <!-- Info Cards Grid -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">

          <!-- Location Card -->
          <div class="package-card" style="display: block;">
            <div class="card-content" style="text-align: center;">
              <ion-icon name="location" style="font-size: 40px; color: var(--bright-navy-blue); margin-bottom: 15px;"></ion-icon>
              <h4 class="h4" style="margin-bottom: 10px; font-size: var(--fs-4); color: var(--gunmetal);">{% trans "Location" %}</h4>
              <p class="card-text">
                {% if destination|get_translated:'city' %}
                  {{ destination|get_translated:'city' }}<br>
                {% endif %}
                {% if destination|get_translated:'region' %}
                  {{ destination|get_translated:'region' }}<br>
                {% endif %}
                {{ destination|get_translated:'country' }}
              </p>
            </div>
          </div>

          <!-- Best Time Card -->
          {% if destination|get_translated:'best_time_to_visit' %}
          <div class="package-card" style="display: block;">
            <div class="card-content" style="text-align: center;">
              <ion-icon name="calendar" style="font-size: 40px; color: var(--bright-navy-blue); margin-bottom: 15px;"></ion-icon>
              <h4 class="h4" style="margin-bottom: 10px; font-size: var(--fs-4); color: var(--gunmetal);">{% trans "Best Time to Visit" %}</h4>
              <p class="card-text">{{ destination|get_translated:'best_time_to_visit' }}</p>
            </div>
          </div>
          {% endif %}

          <!-- Average Cost Card -->
          {% if destination|get_translated:'average_cost' %}
          <div class="package-card" style="display: block;">
            <div class="card-content" style="text-align: center;">
              <ion-icon name="cash" style="font-size: 40px; color: var(--bright-navy-blue); margin-bottom: 15px;"></ion-icon>
              <h4 class="h4" style="margin-bottom: 10px; font-size: var(--fs-4); color: var(--gunmetal);">{% trans "Average Cost" %}</h4>
              <p class="card-text">{{ destination|get_translated:'average_cost' }}</p>
            </div>
          </div>
          {% endif %}

        </div>

        <!-- Things to Do -->
        {% if destination|get_translated:'things_to_do' %}
        <div class="package-card" style="display: block;">
          <div class="card-content">
            <h3 class="h3 card-title" style="margin-bottom: 20px;">
              <ion-icon name="list" style="vertical-align: middle;"></ion-icon>
              {% trans "Things to Do" %}
            </h3>
            <div class="card-text" style="line-height: 1.8;">
              {{ destination|get_translated:'things_to_do'|linebreaks }}
            </div>
          </div>
        </div>
        {% endif %}

      </div>

    </div>

    <!-- Gallery -->
    {% if gallery_images %}
    <div style="margin-bottom: 50px;">
      <p class="section-subtitle">{% trans "Explore" %}</p>
      <h3 class="h2 section-title" style="margin-bottom: 40px;">{% trans "Photo Gallery" %}</h3>

      <div class="gallery-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
        {% for image in gallery_images %}
        <div class="gallery-item">
          <figure class="gallery-image">
            <img src="{{ image.image.url }}" alt="{{ image.caption|default:destination.name }}" loading="lazy">
          </figure>
          {% if image.caption %}
          <p style="margin-top: 12px; font-size: var(--fs-6); color: var(--spanish-gray); text-align: center;">{{ image.caption }}</p>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- Available Packages -->
    {% if packages %}
    <div>
      <p class="section-subtitle">{% trans "Ready to explore?" %}</p>
      <h3 class="h2 section-title" style="margin-bottom: 40px;">{% trans "Available Tour Packages" %}</h3>

      <ul class="package-list">
        {% for package in packages %}
        <li>
          <div class="package-card">

            <figure class="card-banner">
              {% if package.image %}
              <img src="{{ package.image.url }}" alt="{{ package|get_translated:'title' }}" loading="lazy">
              {% else %}
              <img src="{% static 'images/packege-1.jpg' %}" alt="{{ package|get_translated:'title' }}" loading="lazy">
              {% endif %}
            </figure>

            <div class="card-content">
              <h3 class="h3 card-title">{{ package|get_translated:'title' }}</h3>

              <p class="card-text">
                {{ package|get_translated:'description'|truncatewords:20 }}
              </p>

              <ul class="card-meta-list">
                <li class="card-meta-item">
                  <div class="meta-box">
                    <ion-icon name="time"></ion-icon>
                    <p class="text">{{ package|get_translated:'duration' }}</p>
                  </div>
                </li>

                <li class="card-meta-item">
                  <div class="meta-box">
                    <ion-icon name="location"></ion-icon>
                    <p class="text">{{ destination|get_translated:'name' }}</p>
                  </div>
                </li>
              </ul>
            </div>

            <div class="card-price">
              <div class="wrapper">
                <p class="reviews">{% trans "Book Now" %}</p>
              </div>

              <p class="price">
                {{ package.price }} {{ package.currency }}
              </p>

              <a href="{% url 'packages:package_detail' package.slug %}" class="btn btn-secondary">{% trans "View Details" %}</a>
            </div>

          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <!-- CTA -->
    <div style="background: var(--bright-navy-blue); padding: 50px 30px; border-radius: var(--radius-25); text-align: center; margin-top: 60px;">
      <h3 class="h2 section-title" style="color: var(--white); margin-bottom: 15px;">{% trans "Ready for an unforgettable journey?" %}</h3>
      <p class="section-text" style="color: var(--white); margin-bottom: 30px;">
        {% trans "Contact us today to plan your perfect trip to" %} {{ destination|get_translated:'name' }}
      </p>
      <a href="{% url 'core:contact' %}" class="btn btn-secondary">
        <ion-icon name="mail-outline" style="vertical-align: middle; margin-right: 5px;"></ion-icon>
        {% trans "Contact Us" %}
      </a>
    </div>

  </div>
</section>

{% endblock %}
